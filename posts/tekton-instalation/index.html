<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Pipelines com o Tekton - Instalação - Fábio Luciano</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Deploy Cert Manager kubectl create ns cert-manager helm repo add jetstack https://charts.jetstack.io helm repo update helm install \ cert-manager jetstack/cert-manager \ -n cert-manager \ --version v1.1.0 \ --set installCRDs=true openssl genrsa -out ca.key 2048 openssl req -x509 -new -nodes -key ca.key -subj &#34;/CN=integr8.me&#34; -days 3650 -reqexts v3_req -extensions v3_ca -out ca.crt kubectl create secret tls integr8-ca-key-pair \ -n cert-manager \ --cert=ca.crt \ --key=ca.key \ apiVersion: cert-manager.io/v1 kind: ClusterIssuer metadata: name: integr8me namespace: sandbox spec: ca: secretName: integr8-ca-key-pair crlDistributionPoints: - &#34;https://integr8."><meta property="og:image" content><meta property="og:title" content="Pipelines com o Tekton - Instalação"><meta property="og:description" content="Deploy Cert Manager kubectl create ns cert-manager helm repo add jetstack https://charts.jetstack.io helm repo update helm install \ cert-manager jetstack/cert-manager \ -n cert-manager \ --version v1.1.0 \ --set installCRDs=true openssl genrsa -out ca.key 2048 openssl req -x509 -new -nodes -key ca.key -subj &#34;/CN=integr8.me&#34; -days 3650 -reqexts v3_req -extensions v3_ca -out ca.crt kubectl create secret tls integr8-ca-key-pair \ -n cert-manager \ --cert=ca.crt \ --key=ca.key \ apiVersion: cert-manager.io/v1 kind: ClusterIssuer metadata: name: integr8me namespace: sandbox spec: ca: secretName: integr8-ca-key-pair crlDistributionPoints: - &#34;https://integr8."><meta property="og:type" content="article"><meta property="og:url" content="https://fabioluciano.dev/posts/tekton-instalation/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-01T00:00:00+00:00"><meta property="article:modified_time" content="2021-03-01T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Pipelines com o Tekton - Instalação"><meta name=twitter:description content="Deploy Cert Manager kubectl create ns cert-manager helm repo add jetstack https://charts.jetstack.io helm repo update helm install \ cert-manager jetstack/cert-manager \ -n cert-manager \ --version v1.1.0 \ --set installCRDs=true openssl genrsa -out ca.key 2048 openssl req -x509 -new -nodes -key ca.key -subj &#34;/CN=integr8.me&#34; -days 3650 -reqexts v3_req -extensions v3_ca -out ca.crt kubectl create secret tls integr8-ca-key-pair \ -n cert-manager \ --cert=ca.crt \ --key=ca.key \ apiVersion: cert-manager.io/v1 kind: ClusterIssuer metadata: name: integr8me namespace: sandbox spec: ca: secretName: integr8-ca-key-pair crlDistributionPoints: - &#34;https://integr8."><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel=stylesheet><link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://fabioluciano.dev/css/main.2f9b5946627215dc1ae7fa5f82bfc9cfcab000329136befeea5733f21e77d68f.css><link rel=stylesheet type=text/css href=https://fabioluciano.dev/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css></head><body><div class=content><header><div class=main><a href=https://fabioluciano.dev>Fábio Luciano</a></div><nav><a href=/>Home</a>
<a href=/posts>Posts</a>
<a href=/about>Sobre</a>
<a href=/tags>Tags</a>
<a href=https://me.fabioluciano.dev/>Currículo</a></nav></header><main><article><div class=title><h1 class=title>Pipelines com o Tekton - Instalação</h1><div class=meta>Posted on Mar 1, 2021</div></div><section class=body><h2 id=deploy-cert-manager>Deploy Cert Manager</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl create ns cert-manager
</span></span><span style=display:flex><span>helm repo add jetstack https://charts.jetstack.io
</span></span><span style=display:flex><span>helm repo update
</span></span><span style=display:flex><span>helm install <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> cert-manager jetstack/cert-manager <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> -n cert-manager <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> --version v1.1.0 <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> --set <span style=color:#8be9fd;font-style:italic>installCRDs</span><span style=color:#ff79c6>=</span><span style=color:#8be9fd;font-style:italic>true</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>openssl genrsa -out ca.key <span style=color:#bd93f9>2048</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>openssl req -x509 -new -nodes -key ca.key -subj <span style=color:#f1fa8c>&#34;/CN=integr8.me&#34;</span> -days <span style=color:#bd93f9>3650</span> -reqexts v3_req -extensions v3_ca -out ca.crt
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create secret tls integr8-ca-key-pair <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> -n cert-manager <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> --cert<span style=color:#ff79c6>=</span>ca.crt <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> --key<span style=color:#ff79c6>=</span>ca.key <span style=color:#f1fa8c>\
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#ff79c6>apiVersion</span>: cert-manager.io/v1
</span></span><span style=display:flex><span><span style=color:#ff79c6>kind</span>: ClusterIssuer
</span></span><span style=display:flex><span><span style=color:#ff79c6>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>name</span>: integr8me
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>namespace</span>: sandbox
</span></span><span style=display:flex><span><span style=color:#ff79c6>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>ca</span>:
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>secretName</span>: integr8-ca-key-pair
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>crlDistributionPoints</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f1fa8c>&#34;https://integr8.me&#34;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl apply <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> -n cert-manager <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> -f cert-manager-cluster-issuer.yml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kubectl create ns tekton-pipelines
</span></span><span style=display:flex><span>kubectl apply <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> -n tekton-pipelines <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> -f https://storage.googleapis.com/tekton-releases/pipeline/latest/release.yaml <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> -f https://storage.googleapis.com/tekton-releases/triggers/latest/release.yaml <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> -f https://github.com/tektoncd/dashboard/releases/latest/download/tekton-dashboard-release.yaml <span style=color:#f1fa8c>\
</span></span></span><span style=display:flex><span><span style=color:#f1fa8c></span> -f tekton-ingress-dashboard.yml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>kubectl create ns tekton-builds
</span></span><span style=display:flex><span>kubectl apply -n tekton-builds -f rbac-and-account.yml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#ff79c6>apiVersion</span>: v1
</span></span><span style=display:flex><span><span style=color:#ff79c6>kind</span>: ServiceAccount
</span></span><span style=display:flex><span><span style=color:#ff79c6>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>name</span>: tekton-triggers-sa
</span></span><span style=display:flex><span><span style=color:#ff79c6>secrets</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ff79c6>name</span>: gh-token
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#ff79c6>apiVersion</span>: rbac.authorization.k8s.io/v1
</span></span><span style=display:flex><span><span style=color:#ff79c6>kind</span>: Role
</span></span><span style=display:flex><span><span style=color:#ff79c6>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>name</span>: tekton-triggers-roles
</span></span><span style=display:flex><span><span style=color:#ff79c6>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ff79c6>apiGroups</span>: [<span style=color:#f1fa8c>&#34;triggers.tekton.dev&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>resources</span>:
</span></span><span style=display:flex><span>      [<span style=color:#f1fa8c>&#34;eventlisteners&#34;</span>, <span style=color:#f1fa8c>&#34;triggerbindings&#34;</span>, <span style=color:#f1fa8c>&#34;triggertemplates&#34;</span>, <span style=color:#f1fa8c>&#34;triggers&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>verbs</span>: [<span style=color:#f1fa8c>&#34;get&#34;</span>, <span style=color:#f1fa8c>&#34;list&#34;</span>, <span style=color:#f1fa8c>&#34;watch&#34;</span>]
</span></span><span style=display:flex><span>  - <span style=color:#ff79c6>apiGroups</span>: [<span style=color:#f1fa8c>&#34;&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>resources</span>: [<span style=color:#f1fa8c>&#34;configmaps&#34;</span>, <span style=color:#f1fa8c>&#34;secrets&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>verbs</span>: [<span style=color:#f1fa8c>&#34;get&#34;</span>, <span style=color:#f1fa8c>&#34;list&#34;</span>, <span style=color:#f1fa8c>&#34;watch&#34;</span>]
</span></span><span style=display:flex><span>  - <span style=color:#ff79c6>apiGroups</span>: [<span style=color:#f1fa8c>&#34;tekton.dev&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>resources</span>: [<span style=color:#f1fa8c>&#34;pipelineruns&#34;</span>, <span style=color:#f1fa8c>&#34;pipelineresources&#34;</span>, <span style=color:#f1fa8c>&#34;taskruns&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>verbs</span>: [<span style=color:#f1fa8c>&#34;create&#34;</span>]
</span></span><span style=display:flex><span>  - <span style=color:#ff79c6>apiGroups</span>: [<span style=color:#f1fa8c>&#34;&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>resources</span>: [<span style=color:#f1fa8c>&#34;serviceaccounts&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>verbs</span>: [<span style=color:#f1fa8c>&#34;impersonate&#34;</span>]
</span></span><span style=display:flex><span>  - <span style=color:#ff79c6>apiGroups</span>: [<span style=color:#f1fa8c>&#34;policy&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>resources</span>: [<span style=color:#f1fa8c>&#34;podsecuritypolicies&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>resourceNames</span>: [<span style=color:#f1fa8c>&#34;tekton-triggers&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>verbs</span>: [<span style=color:#f1fa8c>&#34;use&#34;</span>]
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#ff79c6>apiVersion</span>: rbac.authorization.k8s.io/v1
</span></span><span style=display:flex><span><span style=color:#ff79c6>kind</span>: RoleBinding
</span></span><span style=display:flex><span><span style=color:#ff79c6>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>name</span>: tekton-triggers-binding
</span></span><span style=display:flex><span><span style=color:#ff79c6>subjects</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ff79c6>kind</span>: ServiceAccount
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>name</span>: tekton-triggers-sa
</span></span><span style=display:flex><span><span style=color:#ff79c6>roleRef</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>apiGroup</span>: rbac.authorization.k8s.io
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>kind</span>: Role
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>name</span>: tekton-triggers-roles
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#ff79c6>kind</span>: ClusterRole
</span></span><span style=display:flex><span><span style=color:#ff79c6>apiVersion</span>: rbac.authorization.k8s.io/v1
</span></span><span style=display:flex><span><span style=color:#ff79c6>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>name</span>: tekton-triggers-clusterrole
</span></span><span style=display:flex><span><span style=color:#ff79c6>rules</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ff79c6>apiGroups</span>: [<span style=color:#f1fa8c>&#34;triggers.tekton.dev&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>resources</span>: [<span style=color:#f1fa8c>&#34;clustertriggerbindings&#34;</span>]
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>verbs</span>: [<span style=color:#f1fa8c>&#34;get&#34;</span>, <span style=color:#f1fa8c>&#34;list&#34;</span>, <span style=color:#f1fa8c>&#34;watch&#34;</span>]
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span><span style=color:#ff79c6>apiVersion</span>: rbac.authorization.k8s.io/v1
</span></span><span style=display:flex><span><span style=color:#ff79c6>kind</span>: ClusterRoleBinding
</span></span><span style=display:flex><span><span style=color:#ff79c6>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>name</span>: tekton-triggers-clusterrolebinding
</span></span><span style=display:flex><span><span style=color:#ff79c6>subjects</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ff79c6>kind</span>: ServiceAccount
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>name</span>: tekton-triggers-sa
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>namespace</span>: tekton-builds
</span></span><span style=display:flex><span><span style=color:#ff79c6>roleRef</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>apiGroup</span>: rbac.authorization.k8s.io
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>kind</span>: ClusterRole
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>name</span>: tekton-triggers-clusterrole
</span></span></code></pre></div></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/tekton>tekton</a></li></ul></nav></div></article></main><footer><hr><a class=soc href=https://github.com/fabioluciano/ title=GitHub><i data-feather=github></i></a>|<a class=soc href=https://twitter.com/fabioluciano/ title=Twitter><i data-feather=twitter></i></a>|<a class=soc href=https://me.fabioluciano.dev/ title=Currículo><i data-feather=user></i></a>|⚡️
2023 Fábio Luciano | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></footer><script>feather.replace()</script></div></body></html>